[program:ib-stream-production]
command=%(ENV_PROJECT_ROOT)s/.venv/bin/uvicorn ib_stream.api_server:app --host 0.0.0.0 --port %(ENV_IB_STREAM_PORT)s --reload
directory=%(ENV_PROJECT_ROOT)s/ib-stream
environment=IB_STREAM_ENV=production-server,PROJECT_ROOT=%(ENV_PROJECT_ROOT)s,IB_STREAM_CLIENT_ID=%(ENV_IB_STREAM_CLIENT_ID)s,IB_CONTRACTS_CLIENT_ID=%(ENV_IB_CONTRACTS_CLIENT_ID)s,IB_STREAM_PORT=%(ENV_IB_STREAM_PORT)s,IB_CONTRACTS_PORT=%(ENV_IB_CONTRACTS_PORT)s,IB_STREAM_HOST=localhost,IB_STREAM_PORTS=4002,IB_STREAM_ENABLE_STORAGE=true,IB_STREAM_ENABLE_JSON=true,IB_STREAM_ENABLE_PROTOBUF=true,IB_STREAM_ENABLE_POSTGRES=true,IB_STREAM_ENABLE_METRICS=true,IB_STREAM_ENABLE_CLIENT_STREAM_STORAGE=true,IB_STREAM_ENABLE_BACKGROUND_STREAMING=true,IB_STREAM_TRACKED_CONTRACTS=711280073:MNQ:bid_ask;last:24,IB_STREAM_MAX_STREAMS=100,IB_STREAM_BUFFER_SIZE=1000,IB_STREAM_ENVIRONMENT=production-server,IB_STREAM_SERVER_TYPE=production
autostart=true
autorestart=true
startretries=3
user=%(ENV_USER)s
stdout_logfile=%(ENV_PROJECT_ROOT)s/logs/ib-stream-production-stdout.log
stderr_logfile=%(ENV_PROJECT_ROOT)s/logs/ib-stream-production-stderr.log
stdout_logfile_maxbytes=10MB
stderr_logfile_maxbytes=10MB
stdout_logfile_backups=5
stderr_logfile_backups=5

[program:ib-contracts-production]
command=%(ENV_PROJECT_ROOT)s/.venv/bin/uvicorn api_server:app --host 0.0.0.0 --port %(ENV_IB_CONTRACTS_PORT)s --reload
directory=%(ENV_PROJECT_ROOT)s/ib-contract
environment=PROJECT_ROOT=%(ENV_PROJECT_ROOT)s,IB_STREAM_ENV=production-server,IB_STREAM_CLIENT_ID=%(ENV_IB_STREAM_CLIENT_ID)s,IB_CONTRACTS_CLIENT_ID=%(ENV_IB_CONTRACTS_CLIENT_ID)s,IB_STREAM_PORT=%(ENV_IB_STREAM_PORT)s,IB_CONTRACTS_PORT=%(ENV_IB_CONTRACTS_PORT)s,IB_STREAM_HOST=localhost,IB_STREAM_PORTS=4002,IB_STREAM_ENVIRONMENT=production-server,IB_STREAM_SERVER_TYPE=production
autostart=true
autorestart=true
startretries=3
user=%(ENV_USER)s
stdout_logfile=%(ENV_PROJECT_ROOT)s/logs/ib-contracts-production-stdout.log
stderr_logfile=%(ENV_PROJECT_ROOT)s/logs/ib-contracts-production-stderr.log
stdout_logfile_maxbytes=10MB
stderr_logfile_maxbytes=10MB
stdout_logfile_backups=5
stderr_logfile_backups=5